{{ define "home"}} 
{{template "index"}} 
  <div class="flex justify-between fixed top-0 left-0 right-0 p-4 z-20 ">
    <h1 class="text-xl font-bold text-black dark:text-white select-none">Draw Fusion</h1> 
    <svg onclick="changeTheme()" class="cursor-pointer" width="30" height="30">
      <circle cx="15" cy="15" r="6" fill="currentColor" />
      <line id="ray" stroke="currentColor" stroke-width="2" stroke-linecap="round" x1="15" y1="1" x2="15" y2="4"></line>
      <use href="#ray" transform="rotate(45 15 15)" />
      <use href="#ray" transform="rotate(90 15 15)" />
      <use href="#ray" transform="rotate(135 15 15)" />
      <use href="#ray" transform="rotate(180 15 15)" />
      <use href="#ray" transform="rotate(225 15 15)" />
      <use href="#ray" transform="rotate(270 15 15)" />
      <use href="#ray" transform="rotate(315 15 15)" />
    </svg>
  </div>
  <canvas class="active:cursor-pointer bg-white dark:bg-white" id="canvas"></canvas> 
  
  <script src="/static/js/websocket.js" type="module"></script>
  <script src="/static/js/canvas.js" type="module"></script>
  <script>
    function changeTheme() {
      const currentTheme = new URLSearchParams(window.location.search).get("theme");

      if (currentTheme === "dark") {
        history.pushState({}, "", window.location.pathname);
        document.documentElement.classList.remove("dark");
        document.getElementById("canvas").style.filter = "invert(0)";
        document.querySelector("svg").style.filter = "invert(0)";
      } else {
        history.pushState({}, "", `${window.location.pathname}?theme=dark`);
        document.documentElement.classList.add("dark");
        document.getElementById("canvas").style.filter = "invert(1)";
        document.querySelector("svg").style.filter = "invert(1)";
      }
    }
  </script>
{{end}}
